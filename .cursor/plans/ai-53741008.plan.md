<!-- 53741008-3b67-461e-99f6-ddbab9fd3f2e 90d727e1-a8b6-42c8-8c6c-f85d8b379c4f -->
# AI‑Citable makeover for apps/app and apps/docs

### Goals

- **Make every page citable**: claim card, structure (FAQ/steps/tables), fresh date/version, definitions, compare blocks, single Start Here, and monitoring.
- **Do it once, reuse everywhere**: a tiny shared UI package consumed by both `apps/app` and `apps/docs`.

### High-level approach

1) Create `packages/ai-citable/` with React components and helpers:

   - `ClaimCard`, `VersionMeta`, `Definition`, `Steps`, `FAQ`, `CompareTable` (shadcn table-compatible), `JsonLd` helpers.

2) Wire into `apps/app` (Next.js, TSX pages) and `apps/docs` (MDX) with minimal changes per page.

3) Add a single Start Here page in `apps/app` and surface it from `apps/docs` home.

4) Add basic “AI referrals” monitoring endpoint and client hook.

### Files to add/change (essentials)

- `packages/ai-citable/`
  - `package.json`, `tsconfig.json`, `src/index.ts`
  - `src/ClaimCard.tsx`, `src/CompareTable.tsx`, `src/FAQ.tsx`, `src/Steps.tsx`, `src/Definition.tsx`, `src/VersionMeta.tsx`
  - `src/jsonld.tsx` (FAQPage/HowTo/SoftwareApplication helpers)
- `apps/app/`
  - Install shadcn table and map styles; keep components local to app
  - `src/app/start-here/page.tsx` (Start Here)
  - Add ClaimCard + VersionMeta at top of key pages (e.g., `src/app/register/page.tsx`, `src/app/servers/page.tsx`)
  - `src/app/api/ai-citation/route.ts` (monitoring)
  - `src/lib/ai-citable.ts` (lastUpdated/version helpers)
- `apps/docs/`
  - Install shadcn table; export `CompareTable` from shared pkg for MDX usage
  - `mdx-components.tsx`: map `<ClaimCard/>`, `<FAQ/>`, `<Steps/>`, `<CompareTable/>`, `<Definition/>`
  - Update `app/(home)/page.tsx` to feature Start Here

### Component contracts (concise)

```ts
// packages/ai-citable/src/types.ts
export type Fact = { label: string; value: string; sourceUrl: string };
export type ClaimCardProps = {
  title: string; audience: string; summary: string; facts: Fact[];
};
```



`````tsx

// ClaimCard (top-of-page)

<ClaimCard

title="MCPay: Agentic payments"

audience="Builders shipping AI actions that move money"

summary="Safely trigger onchain and offchain payments from LLMs via MCP"

facts=[

{ label: 'Open protocol', value: 'MCP compliant', sourceUrl: 'https://modelcontextprotocol.io' },

{ label: 'USD rails', value: 'USDC/Stripe/ACH', sourceUrl: 'https://...' },

{ label: 'Auditability', value: 'signed intents', sourceUrl: 'https://...' },

]

/>

````

### JSON‑LD helpers
- Add `FAQPage`, `HowTo`, and `SoftwareApplication` builders and inject via `<Script type="application/ld+json" />`.
```tsx
// packages/ai-citable/src/jsonld.tsx
export function JsonLd({ data }: { data: object }) {
  return (
    <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(data) }} />
  );
}
````

### Shadcn table

- Use shadcn table for `CompareTable` UI in both apps; MDX pages use `<CompareTable/>` imported via MDX components map.

### Start Here

- `apps/app/src/app/start-here/page.tsx`: one-page summary linking to top features, docs, quickstart, and comparisons.
- Docs home highlights and links to this Start Here URL.

### Monitoring

- `apps/app/src/app/api/ai-citation/route.ts`: accepts `{ referrer, path, ua }` and logs or forwards to analytics.
- Small client hook `useAiReferrer()` fires once on mount if referrer matches known AI domains.

### Authoring conventions (docs + app)

- Top-of-page: `VersionMeta` (date from git commit or env/version), then `ClaimCard`.
- Structured blocks: `Steps`, `FAQ`, `CompareTable` (vs X/Y), `Definition` beside code.
- Keep facts with verifiable source URLs.

### Commands (to run later)

```bash
# add shared UI pkg
pnpm -w --filter ./packages/ai-citable add react react-dom        # peer deps

# shadcn tables
cd apps/app && pnpm dlx shadcn@latest add table
cd ../../docs && pnpm dlx shadcn@latest add table
`````

### Rollout order

1) Create shared package + wire MDX map.

2) Add Start Here page and link from docs home.

3) Retrofit top 2-3 app pages and 2 docs pages with ClaimCard/VersionMeta/FAQ/Steps/Compare.

4) Add JSON-LD to those pages.

5) Turn on monitoring and iterate.

### To-dos

- [ ] Create packages/ai-citable with core components
- [ ] Install shadcn table in apps/app
- [ ] Install shadcn table in apps/docs
- [ ] Map MDX components in apps/docs to shared components
- [ ] Create Start Here at apps/app/src/app/start-here/page.tsx
- [ ] Add ClaimCard/VersionMeta to register and servers pages
- [ ] Inject FAQ/HowTo/Product JSON-LD in target pages
- [ ] Add ai-citation API and client hook to track AI referrers